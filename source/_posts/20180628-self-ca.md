---
title: 自行签发CA证书
date: 2018-06-28 22:12:09
categories: daily
tags: ca
---
# 自签发CA证书 for HTTPS

大部分教程抄来抄去，都是根证书下继续签发给某个组织的形式  
仅做测试、规模不大时，直接签发根证书即可，无需继续下发

## Create Root CA

1. 写好配置文件conf.cnf，预置SAN信息

    ```conf
    # ...

    [ SAN ]
    subjectAltName = DNS:*.chreem.club,DNS:chreem.club
    ```

2. 生成rsa密钥

    ```bash
    > openssl genrsa -des3 -out server.enc.key 2048   # 生成rsa
    > password
    > openssl rsa -in server.enc.key -out server.key    # 写入密码
    ```

3. 生成证书

    ```bash
    > openssl req -new -sha256  \
        -x509 \
        -days 36500 \
        -key server.key \
        -subj "/C=CN/ST=Hubei/L=Wuhan/O=ChreemTech/OU=FS/CN=chreem.club" \
        -extensions SAN \
        -config <(cat ./conf.cnf) \
        -out server.crt
    ```
