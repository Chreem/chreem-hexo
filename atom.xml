<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Chreem&#39;s Blog</title>
  
  <subtitle>Single dog, single dog, single all the day.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://chreem.github.io/"/>
  <updated>2020-06-11T08:48:53.027Z</updated>
  <id>https://chreem.github.io/</id>
  
  <author>
    <name>Chreem</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>docker-composeé…ç½®äºŒç»´ç ç™»å½•ç¯å¢ƒ</title>
    <link href="https://chreem.github.io/2018/06/29/20180629-docker-compose-for-qrcode/"/>
    <id>https://chreem.github.io/2018/06/29/20180629-docker-compose-for-qrcode/</id>
    <published>2018-06-29T20:33:13.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="docker-compose-for-QRCode-Login"><a href="#docker-compose-for-QRCode-Login" class="headerlink" title="docker-compose for QRCode Login"></a>docker-compose for QRCode Login</h1><p>æ°é€¢æŠ€æœ¯æ€»ç›‘é—®æˆ‘äºŒç»´ç ç™»å½•ï¼Œæœ‰æ²¡å•¥æƒ³æ³•ã€‚ä½œä¸ºéœ€è¦å¤šä¸ªæœåŠ¡é…åˆå®Œæˆçš„æœåŠ¡ï¼Œæ­£å¥½æ‹¿docker-composeå†™ä¸€ä¸‹ï¼š</p><p>æœ¬ç¯‡ä»¥è‡ªå·±å†™çš„äºŒç»´ç ç™»å½•ä¸ºä¾‹ä»‹ç»ä¸€ä¸‹<a href="https://github.com/Chreem/todo-list/blob/master/qrcode-login/docker-compose.yml" target="_blank" rel="noopener">å¸¸è§é…ç½®</a></p><h2 id="æ‰€éœ€éƒ¨ä»¶"><a href="#æ‰€éœ€éƒ¨ä»¶" class="headerlink" title="æ‰€éœ€éƒ¨ä»¶"></a>æ‰€éœ€éƒ¨ä»¶</h2><ul><li><code>nginx</code> ä¸ºå¤šä¸ªæœåŠ¡æä¾›åå‘ä»£ç†</li><li><code>redis</code> æš‚å­˜global login idåŠuser login token</li><li><code>node</code> æä¾›ç™»å½•åŠæ¨é€ç™»å½•ä¿¡æ¯</li></ul><a id="more"></a><h1 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h1><p>æ‰€æœ‰é…ç½®å‚æ•°ç›´æ¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼ŒæŸäº›ä¼šç•¥å¾®è¯´æ˜ï¼Œä¸åšèµ˜è¿°</p><h2 id="docker-volume"><a href="#docker-volume" class="headerlink" title="docker volume"></a>docker volume</h2><pre><code>æ¯ä¸ªå®¹å™¨åˆ›å»ºæ—¶ä¼šåŒæ—¶åˆ›å»ºæ•°æ®å·ï¼Œthe same as created by docker-compose  ä¸åŒçš„æ˜¯å•çº¯`docker-compose down`ä¸ä¼šåˆ é™¤æ•°æ®å·ï¼Œéœ€è¦åŠ ä¸Š`-v`å‚æ•°æ‰ä¼šè¿å¸¦åˆ é™¤æ•°æ®å·  ä¸»åŠ¨åˆ›å»ºçš„å¤–éƒ¨å·ä¾ç„¶å¾—æ‰‹åŠ¨åˆ é™¤</code></pre><h2 id="multi-bridge"><a href="#multi-bridge" class="headerlink" title="multi bridge"></a>multi bridge</h2><pre><code>å³ä½¿çœ‹èµ·æ¥æ˜¯è·¯ç”±å¯è¾¾ï¼Œbridgeæ¨¡å¼ä¸‹çš„å¤šä¸ªç½‘æ¡¥ä¹‹é—´ä¾ç„¶ä¸å…è®¸é€šä¿¡ï¼ŒæŸä¸ªå®¹å™¨éœ€è¦åŒæ—¶è®¿é—®æœ€å¥½é åŠ å…¥ä¸¤ä¸ªç½‘æ¡¥ï¼Œå³ï¼š<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">frontend:</span></span><br><span class="line">    <span class="attr">ipv4_address:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.11</span></span><br><span class="line">  <span class="attr">backend:</span></span><br><span class="line">    <span class="attr">ipv4_address:</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.10</span></span><br></pre></td></tr></table></figure></code></pre><h2 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h2><pre><code>ç¾å…¶åæ›°æš´éœ²ç«¯å£ï¼Œä½†å®é™…ä¸Šå³ä½¿ä¸åŠ è¿™æ¡ï¼Œå…¶ä»–å®¹å™¨åŒæ ·èƒ½æ­£å¸¸è®¿é—®ï¼Œä¸»è¦åŠŸèƒ½åº”è¯¥æ˜¯ä½¿ç”¨`docker ps -a`æ—¶èƒ½ç›´è§‚çœ‹åˆ°ç«¯å£å§ï¼Œemmmmm...</code></pre><h2 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h2><pre><code>ä¾èµ–æœåŠ¡ï¼Œå¦‚æœ¬ç¯‡`auth_server`éœ€è¦ç”¨åˆ°redisæš‚å­˜sid&amp;uidï¼Œéœ€è¦rediså…ˆäºä»–å¯åŠ¨</code></pre><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><pre><code>å°½é‡ä¸ç”¨build&amp;Dockerfileæ„å»ºï¼Œå› ä¸ºå‡­ç©ºå¤šç®¡ç†ä¸€ä¸ªimageåè€Œæˆä¸ºç´¯èµ˜ã€‚ä¸å¾—ä¸ç”¨buildå®Œæˆçš„å¤æ‚åœºæ™¯ï¼Œæš‚æ—¶æ²¡é‡åˆ°ä½¿ç”¨`docker-compose down --rmi local`èƒ½åŒæ—¶ç§»é™¤buildå‚æ•°æ„å»ºçš„image</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;docker-compose-for-QRCode-Login&quot;&gt;&lt;a href=&quot;#docker-compose-for-QRCode-Login&quot; class=&quot;headerlink&quot; title=&quot;docker-compose for QRCode Login&quot;&gt;&lt;/a&gt;docker-compose for QRCode Login&lt;/h1&gt;&lt;p&gt;æ°é€¢æŠ€æœ¯æ€»ç›‘é—®æˆ‘äºŒç»´ç ç™»å½•ï¼Œæœ‰æ²¡å•¥æƒ³æ³•ã€‚ä½œä¸ºéœ€è¦å¤šä¸ªæœåŠ¡é…åˆå®Œæˆçš„æœåŠ¡ï¼Œæ­£å¥½æ‹¿docker-composeå†™ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡ä»¥è‡ªå·±å†™çš„äºŒç»´ç ç™»å½•ä¸ºä¾‹ä»‹ç»ä¸€ä¸‹&lt;a href=&quot;https://github.com/Chreem/todo-list/blob/master/qrcode-login/docker-compose.yml&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å¸¸è§é…ç½®&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ‰€éœ€éƒ¨ä»¶&quot;&gt;&lt;a href=&quot;#æ‰€éœ€éƒ¨ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æ‰€éœ€éƒ¨ä»¶&quot;&gt;&lt;/a&gt;æ‰€éœ€éƒ¨ä»¶&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nginx&lt;/code&gt; ä¸ºå¤šä¸ªæœåŠ¡æä¾›åå‘ä»£ç†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;redis&lt;/code&gt; æš‚å­˜global login idåŠuser login token&lt;/li&gt;
&lt;li&gt;&lt;code&gt;node&lt;/code&gt; æä¾›ç™»å½•åŠæ¨é€ç™»å½•ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="daily" scheme="https://chreem.github.io/categories/daily/"/>
    
    
      <category term="docker" scheme="https://chreem.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªè¡Œç­¾å‘CAè¯ä¹¦</title>
    <link href="https://chreem.github.io/2018/06/28/20180628-self-ca/"/>
    <id>https://chreem.github.io/2018/06/28/20180628-self-ca/</id>
    <published>2018-06-28T22:12:09.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è‡ªç­¾å‘CAè¯ä¹¦-for-HTTPS"><a href="#è‡ªç­¾å‘CAè¯ä¹¦-for-HTTPS" class="headerlink" title="è‡ªç­¾å‘CAè¯ä¹¦ for HTTPS"></a>è‡ªç­¾å‘CAè¯ä¹¦ for HTTPS</h1><p>å¤§éƒ¨åˆ†æ•™ç¨‹æŠ„æ¥æŠ„å»ï¼Œéƒ½æ˜¯æ ¹è¯ä¹¦ä¸‹ç»§ç»­ç­¾å‘ç»™æŸä¸ªç»„ç»‡çš„å½¢å¼<br>ä»…åšæµ‹è¯•ã€è§„æ¨¡ä¸å¤§æ—¶ï¼Œç›´æ¥ç­¾å‘æ ¹è¯ä¹¦å³å¯ï¼Œæ— éœ€ç»§ç»­ä¸‹å‘</p><h2 id="Create-Root-CA"><a href="#Create-Root-CA" class="headerlink" title="Create Root CA"></a>Create Root CA</h2><ol><li><p>å†™å¥½é…ç½®æ–‡ä»¶conf.cnfï¼Œé¢„ç½®SANä¿¡æ¯</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ...</span><br><span class="line"></span><br><span class="line">[ SAN ]</span><br><span class="line">subjectAltName &#x3D; DNS:*.chreem.club,DNS:chreem.club</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆrsaå¯†é’¥</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; openssl genrsa -des3 -out server.enc.key 2048   <span class="comment"># ç”Ÿæˆrsa</span></span><br><span class="line">&gt; password</span><br><span class="line">&gt; openssl rsa -<span class="keyword">in</span> server.enc.key -out server.key    <span class="comment"># å†™å…¥å¯†ç </span></span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆè¯ä¹¦</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; openssl req -new -sha256  \</span><br><span class="line">    -x509 \</span><br><span class="line">    -days 36500 \</span><br><span class="line">    -key server.key \</span><br><span class="line">    -subj <span class="string">"/C=CN/ST=Hubei/L=Wuhan/O=ChreemTech/OU=FS/CN=chreem.club"</span> \</span><br><span class="line">    -extensions SAN \</span><br><span class="line">    -config &lt;(cat ./conf.cnf) \</span><br><span class="line">    -out server.crt</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;è‡ªç­¾å‘CAè¯ä¹¦-for-HTTPS&quot;&gt;&lt;a href=&quot;#è‡ªç­¾å‘CAè¯ä¹¦-for-HTTPS&quot; class=&quot;headerlink&quot; title=&quot;è‡ªç­¾å‘CAè¯ä¹¦ for HTTPS&quot;&gt;&lt;/a&gt;è‡ªç­¾å‘CAè¯ä¹¦ for HTTPS&lt;/h1&gt;&lt;p&gt;å¤§éƒ¨åˆ†æ•™ç¨‹æŠ„æ¥æŠ„å»ï¼Œ
      
    
    </summary>
    
    
      <category term="daily" scheme="https://chreem.github.io/categories/daily/"/>
    
    
      <category term="ca" scheme="https://chreem.github.io/tags/ca/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå®¹å™¨ç½‘ç»œ</title>
    <link href="https://chreem.github.io/2017/12/13/20171213-docker-container-ip/"/>
    <id>https://chreem.github.io/2017/12/13/20171213-docker-container-ip/</id>
    <published>2017-12-13T09:14:23.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Dockerå®¹å™¨ç½‘ç»œ"><a href="#Dockerå®¹å™¨ç½‘ç»œ" class="headerlink" title="Dockerå®¹å™¨ç½‘ç»œ"></a>Dockerå®¹å™¨ç½‘ç»œ</h1><p>linuxä¸‹çš„dockeré»˜è®¤åˆ›å»ºç½‘ç»œï¼š</p><blockquote><p>docker0, 172.17.0.0/16</p></blockquote><p>å¯ä»¥å°†è¿è¡Œlinuxçš„å®¿ä¸»æœºçœ‹åšè·¯ç”±å™¨, å…¶ä¸Šçš„docker0æ¥å£è¿æ¥ä¸€å°äº¤æ¢æœºä¸å„å®¹å™¨ç›¸è¿:</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">                +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+               +â€”â€”â€”â€”+</span></span><br><span class="line"><span class="code">        1.1.1.1 |R          |               | SW |       +â€”container1â€”+</span></span><br><span class="line">public network interface    |               |  +----------172.17.0.11 |</span><br><span class="line"><span class="code">                |           |172.17.0.1     |  | |       +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</span></span><br><span class="line"><span class="code">                |         docker0--------------+ |</span></span><br><span class="line"><span class="code">                |           |               |  | |       +â€”container2â€”+</span></span><br><span class="line"><span class="code">                +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+               |  +----------172.17.0.12 |</span></span><br><span class="line"><span class="code">                                            |    |       +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</span></span><br><span class="line"><span class="code">                                            +â€”â€”â€”â€”+</span></span><br></pre></td></tr></table></figure><p>è¯¦æƒ…å¯å‚ç…§æ–‡æ¡£ <a href="https://docs.docker.com/engine/userguide/networking/" target="_blank" rel="noopener">Docker Network Configuration Documentation</a></p><a id="more"></a><h1 id="åˆ›å»ºç½‘ç»œå¹¶ä¸ºå®¹å™¨æŒ‡å®šIP"><a href="#åˆ›å»ºç½‘ç»œå¹¶ä¸ºå®¹å™¨æŒ‡å®šIP" class="headerlink" title="åˆ›å»ºç½‘ç»œå¹¶ä¸ºå®¹å™¨æŒ‡å®šIP"></a>åˆ›å»ºç½‘ç»œå¹¶ä¸ºå®¹å™¨æŒ‡å®šIP</h1><h2 id="è‡ªå®šä¹‰ç½‘ç»œ"><a href="#è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç»œ"></a>è‡ªå®šä¹‰ç½‘ç»œ</h2><p>å’Œå„è™šæ‹Ÿæœºå¤§å‚ç½‘ç»œç±»ä¼¼, å¯è‡ªå®šä¹‰4ç§æ¨¡å¼, é»˜è®¤bridge <del>ä»æ²¡ç”¨è¿‡å¦å¤–3ç§</del></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker network create --subnet=192.168.1.0/24 [SubnetName]      <span class="comment"># åˆ›å»º</span></span><br><span class="line">docker network ls                                               <span class="comment"># æŸ¥çœ‹å·²åˆ›å»ºçš„ç½‘ç»œåç§°åŠæ¨¡å¼</span></span><br></pre></td></tr></table></figure><p>æ¡¥æ¥ç½‘ç»œå¯ç›´æ¥é€šè¿‡<code>ifconfig</code>æŸ¥çœ‹å…¶è¯¦æƒ…</p><h2 id="å®¹å™¨IP"><a href="#å®¹å™¨IP" class="headerlink" title="å®¹å™¨IP"></a>å®¹å™¨IP</h2><p>åœ¨<code>run</code>å‘½ä»¤ä¸­åŠ ä¸Š<code>--network [SubnetName]</code>å³å¯æŒ‡å®šå®¹å™¨è¿è¡Œçš„ç½‘ç»œ. åŒæ—¶, éœ€è¦æŒ‡å®šIPçš„è¯, æ­¤å‘½ä»¤ä¸ºå¿…é€‰é¡¹.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t -v [/physical/site:/container/site] --network [SubnetName] --ip [X.X.X.X] [ImageName] bash</span><br></pre></td></tr></table></figure><h2 id="inspectå‘½ä»¤"><a href="#inspectå‘½ä»¤" class="headerlink" title="inspectå‘½ä»¤"></a>inspectå‘½ä»¤</h2><p><code>inspect</code>å‘½ä»¤ä¸»è¦ä½œç”¨æ˜¯å°†å®¹å™¨çš„å„é¡¹å±æ€§é€šè¿‡jsonæ ¼å¼è¿”å›, è€Œå…¶ä¸­åŒ…æ‹¬äº†å®¹å™¨IP, æ‰€ä»¥é€šå¸¸æŸ¥çœ‹å®¹å™¨IPå¯ä»¥é€šè¿‡<code>inspect</code>çš„<code>--format</code>å‚æ•°æ¥çœ‹åˆ°:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect [ContainerID]</span><br><span class="line">&gt; [</span><br><span class="line">    &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="string">"NetworkSettings"</span>:&#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="string">"IPAddress"</span>:<span class="string">"172.17.0.2"</span>,</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">$ docker inspect -f <span class="string">'&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;'</span> [ContainerID]</span><br><span class="line">&gt; 172.17.0.2</span><br></pre></td></tr></table></figure><p>ä½†dockerä¼šæ˜ å°„å®¹å™¨åä½œä¸ºhostæ¡ç›®ï¼Œå†…éƒ¨ç›´æ¥ä½¿ç”¨å®¹å™¨åå³å¯è®¿é—®å…¶ä»–å®¹å™¨ï¼Œä¸”é€šå¸¸ä¼šæŒ‡å®šip</p><h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ol><li><code>--ip X.X.X.X</code>åªèƒ½åœ¨ç”¨æˆ·å®šä¹‰ç½‘ç»œä¸ŠæŒ‡å®šIP, é»˜è®¤ç½‘ç»œåªèƒ½è‡ªåŠ¨åˆ†é…</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Dockerå®¹å™¨ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#Dockerå®¹å™¨ç½‘ç»œ&quot; class=&quot;headerlink&quot; title=&quot;Dockerå®¹å™¨ç½‘ç»œ&quot;&gt;&lt;/a&gt;Dockerå®¹å™¨ç½‘ç»œ&lt;/h1&gt;&lt;p&gt;linuxä¸‹çš„dockeré»˜è®¤åˆ›å»ºç½‘ç»œï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;docker0, 172.17.0.0/16&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥å°†è¿è¡Œlinuxçš„å®¿ä¸»æœºçœ‹åšè·¯ç”±å™¨, å…¶ä¸Šçš„docker0æ¥å£è¿æ¥ä¸€å°äº¤æ¢æœºä¸å„å®¹å™¨ç›¸è¿:&lt;/p&gt;
&lt;figure class=&quot;highlight md&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+               +â€”â€”â€”â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;        1.1.1.1 |R          |               | SW |       +â€”container1â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public network interface    |               |  +----------172.17.0.11 |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                |           |172.17.0.1     |  | |       +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                |         docker0--------------+ |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                |           |               |  | |       +â€”container2â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+               |  +----------172.17.0.12 |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                                            |    |       +â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;code&quot;&gt;                                            +â€”â€”â€”â€”+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;è¯¦æƒ…å¯å‚ç…§æ–‡æ¡£ &lt;a href=&quot;https://docs.docker.com/engine/userguide/networking/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Docker Network Configuration Documentation&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="knowledge" scheme="https://chreem.github.io/categories/knowledge/"/>
    
    
      <category term="docker" scheme="https://chreem.github.io/tags/docker/"/>
    
      <category term="network" scheme="https://chreem.github.io/tags/network/"/>
    
  </entry>
  
  <entry>
    <title>game2048</title>
    <link href="https://chreem.github.io/2017/11/13/20171113-game2048/"/>
    <id>https://chreem.github.io/2017/11/13/20171113-game2048/</id>
    <published>2017-11-13T14:52:35.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ"><a href="#æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ" class="headerlink" title="æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ"></a>æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ</h1><p>é—®é¢˜:</p><ul><li>å–œé—»ä¹è§çš„æ·±åº¦ç›‘è§†ä¸è§†å›¾æ”¹å˜</li><li>ç”Ÿæˆæ•°å­—çš„æ–¹å¼æ”¹å˜(ç›¸æ¯”é—®é¢˜æ›´åº”è¯¥å«æ”¹åŠ¨)</li><li>è®¡ç®—é€»è¾‘</li><li>[ä¾ç„¶æœªè§£å†³]åŠ¨ç”»</li></ul><p>ä»Šåå¯èƒ½æ·»åŠ :</p><ul><li>replay</li><li>â€¦</li></ul><p><img src="/images/game2048.png" alt="2048"></p><a id="more"></a><h1 id="è®¡ç®—é€»è¾‘"><a href="#è®¡ç®—é€»è¾‘" class="headerlink" title="è®¡ç®—é€»è¾‘"></a>è®¡ç®—é€»è¾‘</h1><p>è¿™ä¸ªéƒ¨åˆ†, å½“åšå¤§å¤´æ¥è¯´å¯çœŸå¤ªæµªè´¹äº†, ä»£ç è¿æ³¨é‡Šä¹Ÿå°±ä¸åˆ°30è¡Œ</p><ol><li><p>å…ˆæŒ‰ç…§ç§»åŠ¨æ–¹å‘åˆ†å„ä¸ªè¡Œåˆ—æ•°ç»„, è®¡ç®—é€»è¾‘æŒ‰æ•°ç»„ä¾æ¬¡è¿›è¡Œ</p></li><li><p>å †æ ˆæš‚å­˜è®¡ç®—ç»“æœ, é€šè¿‡æ¸¸æ ‡åˆ¤æ–­è¯¥å…¥æ ˆè¿˜æ˜¯ç›¸åŠ , æ­¥éª¤:</p> <figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">è®¡ç®—:</span><br><span class="line">éå†ç¬¬ä¸€æ­¥ä¼ å…¥çš„æ•°ç»„</span><br><span class="line">å…ƒç´ ä¸º0åˆ™continue</span><br><span class="line">å †æ ˆæ¸¸æ ‡å¯¹åº”ä½ç½®undefinedåˆ™è¯¥å…ƒç´ å…¥æ ˆ</span><br><span class="line">å¯¹åº”ä½ç½®ä¸æœ¬æ¬¡æ•°å­—ç›¸ç­‰åˆ™*=2, è®°å½•è®¡ç®—ç»“æœä½œä¸ºå¾—åˆ†, æ¸¸æ ‡++</span><br><span class="line">å¦åˆ™å…ƒç´ å…¥æ ˆ, ä¸”æ¸¸æ ‡æŒ‡å‘è¯¥å…ƒç´ (æ¸¸æ ‡++)</span><br><span class="line"></span><br><span class="line">è°ƒæ•´:</span><br><span class="line">å®Œæˆéå†åæ ¹æ®æºæ•°ç»„é•¿åº¦åœ¨å †æ ˆå‰è¡¥å…¨0</span><br><span class="line">å †æ ˆå…ƒç´ ä¾æ¬¡å‡ºæ ˆå³ä¸ºè®¡ç®—ç»“æœ</span><br><span class="line"></span><br><span class="line">è¿”å›å€¼:</span><br><span class="line">ç»“æœ</span><br><span class="line">å¾—åˆ†</span><br><span class="line">ç»“æœä¸ä¼ å…¥æ•°ç»„ä¸ç­‰åˆ™æœªç§»åŠ¨ä»»ä½•å…ƒç´ (ç”¨äºåˆ¤æ–­æ˜¯å¦è¯¥ç”Ÿæˆæ–°æ•°å­—)</span><br></pre></td></tr></table></figure></li><li><p>å®Œå…¨æ²¡æ€€ç–‘è‡ªå·±è®¡ç®—é€»è¾‘æœ‰é—®é¢˜æ‰å¯¼è‡´åŠ¨ç”»éš¾åš</p></li></ol><h1 id="ç›¸æ¯”æ­¤å‰çš„è¿›æ­¥"><a href="#ç›¸æ¯”æ­¤å‰çš„è¿›æ­¥" class="headerlink" title="ç›¸æ¯”æ­¤å‰çš„è¿›æ­¥"></a>ç›¸æ¯”æ­¤å‰çš„è¿›æ­¥</h1><p>å’Œæ‰«é›·ç›¸æ¯”é‡å†™äº†äºŒç»´æ•°ç»„éšæœºä½ç½®ç”Ÿæˆæ•°å­—çš„é€»è¾‘, ä½¿å…¶èƒ½åœ¨æ›´å°çš„æ£‹ç›˜ä¸Šæœ‰æ•ˆè¿è¡Œ</p><ol><li><p>æ­¤å‰çš„æ‰«é›·<br> é€šè¿‡éšæœº[x,y]åœ¨ä»»æ„ä½ç½®ç”Ÿæˆ, è‹¥ç”Ÿæˆçš„[x,y]ä½ç½®å·²æœ‰æ•°å­—åˆ™æ­¤æ¬¡ç”Ÿæˆå¤±è´¥, è¿ç»­10æ¬¡ç”ŸæˆæˆåŠŸåˆ™é€€å‡ºå¾ªç¯</p></li><li><p>æœ¬æ¬¡2048æ•°å­—<br> å…ˆéå†ä¸€æ¬¡æ‰€æœ‰æ ¼å­, å°†ç©ºä½åæ ‡å­˜å…¥æ•°ç»„<br> min(éœ€è¦ç”Ÿæˆçš„ä¸ªæ•°, æ•°ç»„é•¿åº¦)<br> æ ¹æ®è¯¥æ•°ç»„é•¿åº¦éšæœºå…¶ä¸‹æ ‡, å–å‡ºä¸‹æ ‡å¯¹åº”çš„å…ƒç´ å¹¶åœ¨è¯¥ä½ç½®ç”Ÿæˆæ•°å­—<br> é‡å¤å³å¯</p></li></ol><h1 id="æ‹†åˆ†åŠŸèƒ½æ¨¡å—"><a href="#æ‹†åˆ†åŠŸèƒ½æ¨¡å—" class="headerlink" title="æ‹†åˆ†åŠŸèƒ½æ¨¡å—"></a>æ‹†åˆ†åŠŸèƒ½æ¨¡å—</h1><p>æ­¤å‰æŠŠæ‰€æœ‰é€»è¾‘éƒ½å†™åœ¨.vueé‡Œå¯¼è‡´vueè‡ƒè‚¿, æ›¾ç»å°è¯•å†™ä¸€ä¸ªvueå¯¹è±¡æ„é€ å™¨æ¥åˆ†ç¦»å„éƒ¨åˆ†ä»£ç è€Œä¸æ˜¯å¡åœ¨ä¸€ä¸ªObjé‡Œ, ä½†éšåä¸äº†äº†ä¹‹â€¦</p><h1 id="å¯èƒ½å¢åŠ çš„åŠŸèƒ½"><a href="#å¯èƒ½å¢åŠ çš„åŠŸèƒ½" class="headerlink" title="å¯èƒ½å¢åŠ çš„åŠŸèƒ½"></a>å¯èƒ½å¢åŠ çš„åŠŸèƒ½</h1><p>æ­£å› ä¸ºæ¸¸æˆé€»è¾‘æŠ½å‡ºé»˜è®¤å±æ€§ä»è€Œä½¿ä¹‹èƒ½è¿›è¡Œæ›´å¤§æ£‹ç›˜(å¦‚5<em>5, 6</em>6ç­‰)çš„æ¸¸æˆ<br>å‡ºç°4çš„æ¦‚ç‡ä½œä¸ºå‚æ•°å¯é€‰, ä»¥è°ƒæ•´éš¾åº¦<br>æ­¤å¤–ç”Ÿæˆæ•°å­—ä¹Ÿå¯ä»¥ç¨ä½œä¿®æ”¹è¾¾åˆ°åœ¨<code>æŒ‡å®šä½ç½®ç”Ÿæˆå¯¹åº”æ•°å­—</code>çš„æ•ˆæœ, é…åˆè®°å½•æœ¬å±€ç‚¹å‡ºç°çš„ä½ç½®åŠç§»åŠ¨æ–¹å‘, ä»è€Œä½œä¸ºreplayçš„åŸºç¡€</p><p>æ‰€ä»¥å¯èƒ½çš„åŠŸèƒ½:</p><ol><li><p>replay</p></li><li><p>é‡æ’­ä¸­é€”è§‰å¾—æœ¬æ­¥ä¸å¦¥å¯æ¥ç€å½“å‰ä½ç½®ç»§ç»­</p><p> ä½†è¦æ’¤å›è‡³ä¸Šä¸€æ­¥åˆ™åªé ç‚¹å’Œæ–¹å‘æ— æ³•è¿˜åŸ, ä¼¼ä¹åªèƒ½è®°ä¸‹æ¯æ¬¡ç§»åŠ¨åå…¨ç›˜çš„æƒ…å†µ, é¢å¤–å¼€é”€ç•¥å¤§, æ‰€ä»¥æœ¬åŠŸèƒ½çŠ¹è±«ä¸å†³, å³ä½¿çœŸè¦åšä¹Ÿåªä¼šå¤åŸæœ‰é™æ­¥è€Œä¸ä¼šå…¨ç›˜è®°å½•(ä¼—: å°±æ˜¯ä¸æƒ³åš, æˆ‘: puchi!)</p></li><li><p>æ¸¸æˆèŒƒå›´è°ƒæ•´, 4*4ä¸æ»¡è¶³è¿˜å¯ä»¥æ›´é«˜</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ&quot;&gt;&lt;a href=&quot;#æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ&quot; class=&quot;headerlink&quot; title=&quot;æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ&quot;&gt;&lt;/a&gt;æœ€æœ€ç®€å•çš„2048å°æ¸¸æˆ&lt;/h1&gt;&lt;p&gt;é—®é¢˜:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–œé—»ä¹è§çš„æ·±åº¦ç›‘è§†ä¸è§†å›¾æ”¹å˜&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆæ•°å­—çš„æ–¹å¼æ”¹å˜(ç›¸æ¯”é—®é¢˜æ›´åº”è¯¥å«æ”¹åŠ¨)&lt;/li&gt;
&lt;li&gt;è®¡ç®—é€»è¾‘&lt;/li&gt;
&lt;li&gt;[ä¾ç„¶æœªè§£å†³]åŠ¨ç”»&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»Šåå¯èƒ½æ·»åŠ :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;replay&lt;/li&gt;
&lt;li&gt;â€¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/images/game2048.png&quot; alt=&quot;2048&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="games" scheme="https://chreem.github.io/categories/games/"/>
    
    
      <category term="vue" scheme="https://chreem.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>VPS setup</title>
    <link href="https://chreem.github.io/2017/11/13/20171113-vps-setup/"/>
    <id>https://chreem.github.io/2017/11/13/20171113-vps-setup/</id>
    <published>2017-11-13T13:07:49.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="VPSå„ç§åŸºç¡€æœåŠ¡"><a href="#VPSå„ç§åŸºç¡€æœåŠ¡" class="headerlink" title="VPSå„ç§åŸºç¡€æœåŠ¡"></a>VPSå„ç§åŸºç¡€æœåŠ¡</h1><p>æ­£å·§æœ€è¿‘å‡†å¤‡æ¢VPS, å€’è…¾ä¸€ä¸‹è‡ªå·±ç”¨äº†å“ªäº›ä¸œè¥¿, ä¸‡ä¸€ä¸‹æ¬¡è¦æ¢ä¸ç”¨åˆ°å¤„æ‰¾è´´</p><p>æ•´ç†ä¸‹é¡ºåº:</p><ol><li>VPSé¡µç»‘å®šSSH Keyä»¥åŠé˜²ç«å¢™å®ä¾‹, é»˜è®¤æ”¾å¼€80/443/3389/5432ç«¯å£, åç»­æœ‰éœ€è¦å†è¿½åŠ </li><li>ä¿®æ”¹SSHç«¯å£ port:5432</li><li><a href="#RDP">å¼€å¯BBRåŠ é€Ÿ, SS port:3389</a></li><li><a href="#Nginx">Nginx</a></li><li><a href="#Docker">docker(è™šæ‹Ÿæœº, å› ä¸ºè¿˜æ²¡å»çœ‹æ›´é«˜çº§çš„åŠŸèƒ½ğŸ˜­)</a></li><li>åŸŸåå•†é¡µé¢ä¿®æ”¹Aè®°å½•</li><li>[å¢åŠ è™šæ‹Ÿå†…å­˜](#Virtual Memory)</li></ol><a id="more"></a><h2 id="å„ç§æœåŠ¡"><a href="#å„ç§æœåŠ¡" class="headerlink" title="å„ç§æœåŠ¡"></a>å„ç§æœåŠ¡</h2><p>ç»‘å®šå®ä¾‹æ”¾å¼€ç«¯å£æ²¡å•¥å¯è¯´çš„, SSHç«¯å£ç›´æ¥<code>vi /etc/ssh/sshd_config</code>ä¸‹æ‰¾åˆ°<code>Port 22</code>æ”¹æ‰å°±å¥½<br>ä¿®æ”¹åŸŸåè®°å½•ä¹Ÿæ— éæ”¹æ”¹å¯¹åº”çš„VPS IPè€Œå·²</p><h3 id="RDP"><a href="#RDP" class="headerlink" title="RDP"></a>RDP</h3><p>æ²¡å•¥å¯ä»‹ç»çš„, è¿™ç ´é”…ä¸‹éƒ½è¯¥ä¼š<br>æ­¤å‰å„ç§FreeGate, GAE, SQSXéƒ½å¤šå°‘ç”¨è¿‡, æœç„¶è¿˜æ˜¯é…¸é…¸ä¹³æœ€å¥½ç”¨, å¤‡é€‰ä¹‹ä¸€v2ray</p><ol><li><p>linuxå†…æ ¸ç‰ˆæœ¬â‰¥4.9</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; uname -r                                          <span class="comment"># æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</span></span><br><span class="line">4.4.0-57-generic</span><br><span class="line">&gt; apt-cache search linux-image                      <span class="comment"># æŸ¥çœ‹å¯ä¸‹è½½çš„å†…æ ¸</span></span><br><span class="line">&gt; apt-get install linux-images-4.10.0-21-generic</span><br><span class="line">&gt; apt-get remove linux-images-4.4.0-57-generic</span><br><span class="line">&gt; reboot</span><br></pre></td></tr></table></figure></li><li><p>å¯ç”¨bbr</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; vi /etc/sysctl.conf                   <span class="comment"># åœ¨æœ€ååŠ ä¸Š:</span></span><br><span class="line">net.core.default_qdisc=fq</span><br><span class="line">net.ipv4.tcp_congestion_control=bbr</span><br><span class="line">&gt; sysctl -p                             <span class="comment"># ä¿å­˜é€€å‡ºå¹¶æ‰§è¡Œæ­¤æ¡</span></span><br><span class="line">&gt; lsmod | grep bbr                      <span class="comment"># æŸ¥çœ‹æ˜¯å¦æœ‰ç±»ä¼¼å¦‚ä¸‹è¾“å‡º</span></span><br><span class="line">tcp_bbr                20480  3</span><br></pre></td></tr></table></figure></li><li><p>æœåŠ¡</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; apt-get install rdp(è¿œç¨‹æ»‘ç¨½æ¡Œé¢)</span><br><span class="line">&gt; vi rdpserver.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"server"</span> : <span class="string">"vpsçš„ip"</span>,              // ä¸èƒ½ä¸º0.0.0.0</span><br><span class="line">    <span class="string">"server_port"</span> : æƒ³ä½¿ç”¨çš„ç«¯å£,       // 3389, é…ç½®è¿œç¨‹æ¡Œé¢å‘€(æ»‘ç¨½</span><br><span class="line">    <span class="string">"local_address"</span> : <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"local_port"</span> : 1080,</span><br><span class="line">    <span class="string">"password"</span> : <span class="string">"å¦‚å"</span>,</span><br><span class="line">    <span class="string">"timeout"</span> : 300,</span><br><span class="line">    <span class="string">"method"</span> : <span class="string">"åŠ å¯†æ–¹å¼"</span>,              // é€šå¸¸ä¸ºaes-256-cfb</span><br><span class="line">    <span class="string">"fast_open"</span> : <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&gt; rdpserver -c rdpserver.json start     <span class="comment"># è¿è¡ŒæœåŠ¡</span></span><br><span class="line">&gt; nohup xxx(rdpserver xxx) &amp;            <span class="comment"># æˆ–nohupåå°è¿è¡Œ</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><ol><li><p>gzip, å»æ‰æ³¨é‡Šå³å¯</p></li><li><p>å¸¸ç”¨é…ç½®</p><p> ä¸Šä¼ è¯ä¹¦ååœ¨å¯¹åº”é¡µé¢ä¸‹é…ç½®:</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åå‘ä»£ç†é…ç½®</span></span><br><span class="line">upstream site&#123;</span><br><span class="line">    server 192.168.1.20:3000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 80ç«¯å£è½¬å‘è‡³443</span></span><br><span class="line">server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line">    rewrite ^(.*)$ https://<span class="variable">$server_name</span><span class="variable">$1</span> permanent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443;</span><br><span class="line">    server_name åŸŸå;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é™æ€èµ„æºé…ç½®</span></span><br><span class="line">    root /var/www/html;</span><br><span class="line">    index index.html;</span><br><span class="line">    error_page 403 404 = /error.json;</span><br><span class="line">    location / &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†é…ç½®(å†…éƒ¨è‹¥ä½¿ç”¨httpséœ€å¯¹åº”ä¿®æ”¹, ä¸è¿‡æ­£å¸¸æƒ…å†µåº”è¯¥ä¸ä¼š...)</span></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://site;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># èµ„æºç¼“å­˜</span></span><br><span class="line">    location ~* \.(ico|gif|jpg|jpeg|png|js|css|txt|xml|swf|wav|ttf)$ &#123;</span><br><span class="line">        proxy_pass http://site;     <span class="comment"># è§†æƒ…å†µæ·»åŠ </span></span><br><span class="line">        access_log   off;</span><br><span class="line">        expires      3d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate .crtçš„è·¯å¾„;</span><br><span class="line">    ssl_certificate_key .keyçš„è·¯å¾„;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>æ›´é«˜çº§çš„åŠŸèƒ½å¾…æ—¥åç ”ç©¶<br>ä½¿ç”¨nginxåå‘ä»£ç†æ•…æ— éœ€ä½¿ç”¨<code>-p ç‰©ç†ç«¯å£:å®¹å™¨ç«¯å£</code></p><ol><li>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ <code>docker network create --subnet=192.168.1.0/24 SelfNet</code></li><li>è¿è¡Œå®¹å™¨å¹¶åˆ†é…IP <code>docker run xxx -v ç‰©ç†è·¯å¾„:å®¹å™¨å†…è·¯å¾„ --network SelfNet --ip 192.168.1.x é•œåƒå</code></li><li>è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨ <code>docker exec -it å®¹å™¨å bash</code></li><li>ç¦»å¼€å®¹å™¨ä¸ä¸­æ–­è¿è¡Œ <code>ctrl + p =&gt; ctrl + q</code></li></ol><h3 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h3><p>å› è´­å…¥çš„2.5$åªæœ‰512Må†…å­˜, è·‘nodeç‰¹åˆ«æ˜¯buildæ­¥éª¤å„ç§error 137<br>å¤§å¤´å…¨åœ¨æ„å»ºä¸Š, æ‰€ä»¥åªè¦æ„å»ºæˆåŠŸåç»­éƒ¨ç½²æ‰€éœ€çš„å†…å­˜å°±ä¸ä¼šè¿™ä¹ˆå¤§äº†<br>äºæ˜¯å¢åŠ è™šæ‹Ÿå†…å­˜å¦„å›¾è§£å†³  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; free -m                                           <span class="comment"># æŸ¥çœ‹å†…å­˜ç©ºé—´</span></span><br><span class="line">&gt; df -B M                                           <span class="comment"># æŸ¥çœ‹ç£ç›˜..</span></span><br><span class="line">&gt; dd <span class="keyword">if</span>=/dev/zero of=/.swapfile bs=1M count=1024    <span class="comment"># å»ºç«‹1Gçš„è™šå­˜æ–‡ä»¶</span></span><br><span class="line">&gt; mv .swapfile /root                                <span class="comment"># æ–‡ä»¶éšæ„å¤„ç½®, å¦‚ç§»åŠ¨</span></span><br><span class="line">&gt; mkswap .swapfile                                  <span class="comment"># å°†æ–‡ä»¶è®¾ä¸ºäº¤æ¢åˆ†åŒº</span></span><br><span class="line">&gt; swapon .swapfile                                  <span class="comment"># å¯ç”¨è™šæ‹Ÿå†…å­˜</span></span><br><span class="line">&gt; swapoff -v .swapfile                              <span class="comment"># é‡Šæ”¾....</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;VPSå„ç§åŸºç¡€æœåŠ¡&quot;&gt;&lt;a href=&quot;#VPSå„ç§åŸºç¡€æœåŠ¡&quot; class=&quot;headerlink&quot; title=&quot;VPSå„ç§åŸºç¡€æœåŠ¡&quot;&gt;&lt;/a&gt;VPSå„ç§åŸºç¡€æœåŠ¡&lt;/h1&gt;&lt;p&gt;æ­£å·§æœ€è¿‘å‡†å¤‡æ¢VPS, å€’è…¾ä¸€ä¸‹è‡ªå·±ç”¨äº†å“ªäº›ä¸œè¥¿, ä¸‡ä¸€ä¸‹æ¬¡è¦æ¢ä¸ç”¨åˆ°å¤„æ‰¾è´´&lt;/p&gt;
&lt;p&gt;æ•´ç†ä¸‹é¡ºåº:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;VPSé¡µç»‘å®šSSH Keyä»¥åŠé˜²ç«å¢™å®ä¾‹, é»˜è®¤æ”¾å¼€80/443/3389/5432ç«¯å£, åç»­æœ‰éœ€è¦å†è¿½åŠ &lt;/li&gt;
&lt;li&gt;ä¿®æ”¹SSHç«¯å£ port:5432&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#RDP&quot;&gt;å¼€å¯BBRåŠ é€Ÿ, SS port:3389&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#Nginx&quot;&gt;Nginx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#Docker&quot;&gt;docker(è™šæ‹Ÿæœº, å› ä¸ºè¿˜æ²¡å»çœ‹æ›´é«˜çº§çš„åŠŸèƒ½ğŸ˜­)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åŸŸåå•†é¡µé¢ä¿®æ”¹Aè®°å½•&lt;/li&gt;
&lt;li&gt;[å¢åŠ è™šæ‹Ÿå†…å­˜](#Virtual Memory)&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="daily" scheme="https://chreem.github.io/categories/daily/"/>
    
    
      <category term="server" scheme="https://chreem.github.io/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>raspberry-site</title>
    <link href="https://chreem.github.io/2017/10/29/20171029-raspberry-site/"/>
    <id>https://chreem.github.io/2017/10/29/20171029-raspberry-site/</id>
    <published>2017-10-29T18:12:29.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Raspberry-Site"><a href="#Raspberry-Site" class="headerlink" title="Raspberry Site"></a>Raspberry Site</h1><p>ç›®å‰ä½œä¸ºè‡ªç”¨web serverä»¥åŠç¡¬ä»¶ç ”ç©¶æœåŠ¡å™¨, ç”¨äº†å„ç§åŠŸèƒ½</p><h2 id="å„ç§åŠŸèƒ½"><a href="#å„ç§åŠŸèƒ½" class="headerlink" title="å„ç§åŠŸèƒ½"></a>å„ç§åŠŸèƒ½</h2><ol><li><p>é™æ€èµ„æºæœåŠ¡</p><p> åŸè®¡åˆ’ç”¨ä¸€ä¸ªè·‘åœ¨dockerå®¹å™¨ä¸­çš„node/expressæ¥åš, ä¸è¿‡dockeréƒ¨ç½²ä¸å¤ªé¡ºåˆ©, æš‚æ—¶å¿½ç•¥</p><p> apache2</p></li><li><p>GPIO Control</p><p> ä¹‹å‰ç”¨node fsè±¡å¾æ€§çš„å†™äº†å†™, é€šè¿‡è®¾ç½®æ ‘è“æ´¾ç³»ç»Ÿæš´éœ²å‡ºçš„/sys/gpioæ¥å£æ¥æ§åˆ¶<br> ç„¶è€Œ<a href="https://github.com/jperkin/node-rpio" target="_blank" rel="noopener">åˆ«äººå®¶</a>é€šè¿‡bcm2835çš„cæ–‡ä»¶ç›´æ¥å¯¹å†…å­˜æ“ä½œï¼Œå…¶Readmeä¹Ÿç»™å‡ºäº†æ€§èƒ½å¯¹æ¯”ï¼Œé‚æ”¾å¼ƒè‡ªå·±é€ è½®å­</p><p> rpio, express, socket.io</p></li><li><p>ä¸Šè¿°çš„é…å¥—UI</p><p> ä¸ºäº†ä»å…¬ç½‘å¯è®¿é—®ï¼Œéœ€è¦å»ºç«‹ä¸€å°websocket serverï¼Œä¸”nodeæœåŠ¡ä¸å‰ç«¯éƒ½åŠ å…¥è¿™ä¸ªserver</p><p> socket.io-client</p></li></ol><a id="more"></a><h1 id="é™æ€ç«™ç‚¹"><a href="#é™æ€ç«™ç‚¹" class="headerlink" title="é™æ€ç«™ç‚¹"></a>é™æ€ç«™ç‚¹</h1><h2 id="Apache2-CORS"><a href="#Apache2-CORS" class="headerlink" title="Apache2 CORS"></a>Apache2 CORS</h2><p>ä¸å¾—ä¸è¯´apacheçš„ç›®å½•ç»“æ„è¶Šæ¥è¶Šåƒnginxäº†, åŒæ ·çš„xxx-available xxx-enable<br>apache2çš„ç›®å½•ç»“æ„å’Œ1ç›¸æ¯”å˜åŒ–ä¸å°, ä¸è¿‡å˜åŒ–å†å¤§ä¹Ÿä¸å…³æˆ‘å•¥äº‹, åæ­£æˆ‘ä¹Ÿç”¨ä¸ä¸ŠğŸ˜¹</p><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ®è¯´headeræ¨¡å—é»˜è®¤å¼€å¯, ä½†æˆ‘çš„æ²¡, æ€•æ˜¯ç”¨äº†å‡apache</span></span><br><span class="line">&gt; a2enmod headers</span><br><span class="line">&gt; vim /etc/apache2/apache2.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°å¹¶å°†Headeræ”¹ä¸ºä»¥ä¸‹:</span></span><br><span class="line">&lt;Directory /var/www&gt;</span><br><span class="line">Options Indexes FollowSymLinks</span><br><span class="line">AllowOverride All</span><br><span class="line">Header <span class="built_in">set</span> Access-Control-Allow-Origin <span class="string">"*"</span></span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•å¹¶é‡å¯</span></span><br><span class="line">&gt; apachectl -t</span><br><span class="line">&gt; service apache2 reload</span><br></pre></td></tr></table></figure><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ä¸èƒ½ä½¿ç”¨ç±»ä¼¼expressçš„<code>res.header(&#39;Access-Control-Allow-Origin&#39;, req.get(&#39;origin&#39;))</code>æ¥è®¾ç½®Originï¼Œä»…ä»…åªèƒ½ä½œä¸ºé™æ€èµ„æºæœåŠ¡  </p><h1 id="GPIOæ¥å£æ§åˆ¶"><a href="#GPIOæ¥å£æ§åˆ¶" class="headerlink" title="GPIOæ¥å£æ§åˆ¶"></a>GPIOæ¥å£æ§åˆ¶</h1><p>nodejsçš„gpioæ§åˆ¶ï¼Œç›®å‰å”¯ä¸€çš„ä½œç”¨æ˜¯ï¼Œå¼€å…³ç¯ğŸ˜‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Raspberry-Site&quot;&gt;&lt;a href=&quot;#Raspberry-Site&quot; class=&quot;headerlink&quot; title=&quot;Raspberry Site&quot;&gt;&lt;/a&gt;Raspberry Site&lt;/h1&gt;&lt;p&gt;ç›®å‰ä½œä¸ºè‡ªç”¨web serverä»¥åŠç¡¬ä»¶ç ”ç©¶æœåŠ¡å™¨, ç”¨äº†å„ç§åŠŸèƒ½&lt;/p&gt;
&lt;h2 id=&quot;å„ç§åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#å„ç§åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;å„ç§åŠŸèƒ½&quot;&gt;&lt;/a&gt;å„ç§åŠŸèƒ½&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;é™æ€èµ„æºæœåŠ¡&lt;/p&gt;
&lt;p&gt; åŸè®¡åˆ’ç”¨ä¸€ä¸ªè·‘åœ¨dockerå®¹å™¨ä¸­çš„node/expressæ¥åš, ä¸è¿‡dockeréƒ¨ç½²ä¸å¤ªé¡ºåˆ©, æš‚æ—¶å¿½ç•¥&lt;/p&gt;
&lt;p&gt; apache2&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GPIO Control&lt;/p&gt;
&lt;p&gt; ä¹‹å‰ç”¨node fsè±¡å¾æ€§çš„å†™äº†å†™, é€šè¿‡è®¾ç½®æ ‘è“æ´¾ç³»ç»Ÿæš´éœ²å‡ºçš„/sys/gpioæ¥å£æ¥æ§åˆ¶&lt;br&gt; ç„¶è€Œ&lt;a href=&quot;https://github.com/jperkin/node-rpio&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åˆ«äººå®¶&lt;/a&gt;é€šè¿‡bcm2835çš„cæ–‡ä»¶ç›´æ¥å¯¹å†…å­˜æ“ä½œï¼Œå…¶Readmeä¹Ÿç»™å‡ºäº†æ€§èƒ½å¯¹æ¯”ï¼Œé‚æ”¾å¼ƒè‡ªå·±é€ è½®å­&lt;/p&gt;
&lt;p&gt; rpio, express, socket.io&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸Šè¿°çš„é…å¥—UI&lt;/p&gt;
&lt;p&gt; ä¸ºäº†ä»å…¬ç½‘å¯è®¿é—®ï¼Œéœ€è¦å»ºç«‹ä¸€å°websocket serverï¼Œä¸”nodeæœåŠ¡ä¸å‰ç«¯éƒ½åŠ å…¥è¿™ä¸ªserver&lt;/p&gt;
&lt;p&gt; socket.io-client&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="daily" scheme="https://chreem.github.io/categories/daily/"/>
    
    
      <category term="server" scheme="https://chreem.github.io/tags/server/"/>
    
      <category term="raspberry" scheme="https://chreem.github.io/tags/raspberry/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹</title>
    <link href="https://chreem.github.io/2017/09/21/20170921-upload/"/>
    <id>https://chreem.github.io/2017/09/21/20170921-upload/</id>
    <published>2017-09-21T17:57:04.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹"><a href="#æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹"></a>æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹</h1><p>ç«™ç‚¹ç™»å½•è®¤è¯å¯ç•¥å¾®å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/29101305" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/29101305</a>ï¼Œå³Authorizationå­—æ®µ<br>é‰´æƒåæ¥åˆ¤æ–­æ˜¯å¦å…è®¸å†™å…¥æ–‡ä»¶</p><p>æ¶‰åŠå­—æ®µ:  </p><table><thead><tr><th>åç§°</th><th>Value</th></tr></thead><tbody><tr><td>Access-Control-Allow-Credentials</td><td>true</td></tr><tr><td>Access-Control-Allow-Headers</td><td>Accept, Authorization, Content-Type, X-Requested-With, Range</td></tr><tr><td>Access-Control-Allow-Methods</td><td>GET,POST,PUT,PATCH,DELETE</td></tr><tr><td>Access-Control-Allow-Origin</td><td><code>http://localhost:8080</code></td></tr><tr><td>Authorization</td><td>xxxâ€¦</td></tr><tr><td>Cookie</td><td>xxxâ€¦</td></tr><tr><td>Content-Length</td><td>xxxâ€¦</td></tr><tr><td>Content-Type</td><td>application/json</td></tr><tr><td>Server</td><td>chr/0.0.1</td></tr><tr><td>X-Powered-By</td><td>Chreem</td></tr></tbody></table><a id="more"></a><h1 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h1><ol><li><p>HTTP/1.1</p><p> æŒä¹…è¿æ¥Connection: keep-alive<br> ç®¡é“æœºåˆ¶: å¤šä¸ªèµ„æºå¤ç”¨ä¸€æ¡TCPè¿æ¥, ä½†ä¸€æ¡è¿æ¥ä¸­çš„èµ„æºé¡ºåºåŠ è½½<br> å¯¹åº”ä¸Šæ¡è€Œä½¿ç”¨Content-Lengthå­—æ®µ<br> åˆ†å—ä¼ è¾“ç¼–ç åŠTransfer-Encoding: chunkedå­—æ®µ<br> GET,POSTå¤–çš„å¦‚PUT,PATCH,DELETEç­‰å­—æ®µ</p></li><li><p>WebSocket</p><p> é€šè¿‡HTTP/1.1æ¡æ‰‹, ç›¸æ¯”HTTP/2çš„æœåŠ¡ç«¯æ¨é€æ›´åå‘äºå³æ—¶é€šè®¯</p></li><li><p>HTTP/2</p><p> æœåŠ¡ç«¯æ¨é€, ç›¸æ¯”HTTP/1.1å®¢æˆ·ç«¯è§£æHTMLå†å‘å‡ºé™æ€èµ„æºè¯·æ±‚, HTTP/2å¯å°†HTMLè¿”å›å¹¶ä¸»åŠ¨æ¨é€é™æ€èµ„æº</p></li></ol><h1 id="è®¤è¯"><a href="#è®¤è¯" class="headerlink" title="è®¤è¯"></a>è®¤è¯</h1><p>ä¸ºäº†é…åˆåç«¯éªŒè¯, ä¿å­˜ç”¨æˆ·åŠ å…¥çš„èŠå¤©å®¤åŠæƒé™ä»¥å…æ¯æ¬¡è¯·æ±‚éƒ½å¾—è¿åº“éªŒè¯, ä¾ç„¶ä½¿ç”¨äº†express-session, éœ€è¦å®¢æˆ·ç«¯å‘é€Cookie</p><p>æœåŠ¡ç«¯éœ€æä¾›CORSå¤´, ä¸ºè®¾ç½®Cookieéœ€ Credentialsè®¾ç½®ä¸ºtrueä¸” Originä¸èƒ½ä¸º*</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">HEADERS: &#123;</span><br><span class="line">    <span class="string">'Access-Control-Allow-Credentials'</span>: <span class="string">'true'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Methods'</span>: <span class="string">'GET,POST,PUT,PATCH,DELETE'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Headers'</span>: <span class="string">'Accept, Authorization, Content-Type, X-Requested-With, Range'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Expose-Headers'</span>: <span class="string">'Content-Length'</span>,</span><br><span class="line">    <span class="string">'X-Powered-By'</span>: <span class="string">'Chreem &lt;chreem@qq.com&gt;'</span>,</span><br><span class="line">    <span class="string">'Server'</span>: <span class="string">'chr-server/0.0.1'</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    res.header(HEADERS);</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Origin'</span>, req.get(<span class="string">'origin'</span>)) <span class="comment">// DEBUG_MODE</span></span><br><span class="line">    <span class="keyword">return</span> req.method === <span class="string">'OPTIONS'</span> ? res.sendStatus(<span class="number">200</span>) : next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯è¿˜éœ€å…è®¸éªŒè¯å¤´withCredentials</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ —å­axios</span></span><br><span class="line">axios.defaults.withCredentials = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h1 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h1><p>æ–‡ä»¶ä¸Šä¼ ä½¿ç”¨POST Content-Type: â€˜multipart/form-dataâ€™<br>ç›´æ¥ä½¿ç”¨åŸç”ŸFormDataå¯çœå»è¯¸å¤šéº»çƒ¦:  </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uploadFile</span>(<span class="params">&#123;fileName: <span class="built_in">String</span>, file: File, token: <span class="built_in">String</span>&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (site.DEBUG_MODE) &#123;<span class="keyword">return</span> token&#125;</span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    formData.set(<span class="string">'key'</span>, fileName);</span><br><span class="line">    formData.set(<span class="string">'token'</span>, token);</span><br><span class="line">    formData.set(<span class="string">'file'</span>, file, fileName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(<span class="string">'post'</span>, QINIU_UPLOAD_DOMAIN, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(formData)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆreq.bodyå½¢å¦‚:</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">POST http://upload.xxx/</span><br><span class="line">Content-Type: multipart/form-data; boundary=<span class="xml"><span class="tag">&lt;<span class="name">Boundary</span>&gt;</span></span></span><br><span class="line">--<span class="xml"><span class="tag">&lt;<span class="name">Boundary</span>&gt;</span></span></span><br><span class="line">Content-Disposition: form-data; name="key"</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">resource_key</span>&gt;</span></span></span><br><span class="line">--<span class="xml"><span class="tag">&lt;<span class="name">Boundary</span>&gt;</span></span></span><br><span class="line">Content-Disposition: form-data; name="token"</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">upload_token</span>&gt;</span></span></span><br><span class="line">--<span class="xml"><span class="tag">&lt;<span class="name">Boundary</span>&gt;</span></span></span><br><span class="line">Content-Disposition: form-data; name="file"; filename="[æ–‡ä»¶å]"</span><br><span class="line">Content-Type: <span class="xml"><span class="tag">&lt;<span class="name">MimeType</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">[æ–‡ä»¶å†…å®¹]</span><br><span class="line">--<span class="xml"><span class="tag">&lt;<span class="name">Boundary</span>&gt;</span></span>--</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹&quot;&gt;&lt;a href=&quot;#æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹&quot; class=&quot;headerlink&quot; title=&quot;æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹&quot;&gt;&lt;/a&gt;æ–‡ä»¶ä¸Šä¼ åŠæ³¨æ„äº‹é¡¹&lt;/h1&gt;&lt;p&gt;ç«™ç‚¹ç™»å½•è®¤è¯å¯ç•¥å¾®å‚è€ƒ&lt;a href=&quot;https://zhuanlan.zhihu.com/p/29101305&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://zhuanlan.zhihu.com/p/29101305&lt;/a&gt;ï¼Œå³Authorizationå­—æ®µ&lt;br&gt;é‰´æƒåæ¥åˆ¤æ–­æ˜¯å¦å…è®¸å†™å…¥æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;æ¶‰åŠå­—æ®µ:  &lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;Value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Access-Control-Allow-Credentials&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Access-Control-Allow-Headers&lt;/td&gt;
&lt;td&gt;Accept, Authorization, Content-Type, X-Requested-With, Range&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Access-Control-Allow-Methods&lt;/td&gt;
&lt;td&gt;GET,POST,PUT,PATCH,DELETE&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Access-Control-Allow-Origin&lt;/td&gt;
&lt;td&gt;&lt;code&gt;http://localhost:8080&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Authorization&lt;/td&gt;
&lt;td&gt;xxxâ€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cookie&lt;/td&gt;
&lt;td&gt;xxxâ€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Length&lt;/td&gt;
&lt;td&gt;xxxâ€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Type&lt;/td&gt;
&lt;td&gt;application/json&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Server&lt;/td&gt;
&lt;td&gt;chr/0.0.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X-Powered-By&lt;/td&gt;
&lt;td&gt;Chreem&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="knowledge" scheme="https://chreem.github.io/categories/knowledge/"/>
    
    
      <category term="html" scheme="https://chreem.github.io/tags/html/"/>
    
      <category term="upload" scheme="https://chreem.github.io/tags/upload/"/>
    
  </entry>
  
  <entry>
    <title>æ‰«é›·</title>
    <link href="https://chreem.github.io/2017/03/26/20170326-search-boom/"/>
    <id>https://chreem.github.io/2017/03/26/20170326-search-boom/</id>
    <published>2017-03-26T09:04:33.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ‰«é›·"><a href="#æ‰«é›·" class="headerlink" title="æ‰«é›·"></a>æ‰«é›·</h1><p>çªå‘å¥‡æƒ³å°±å¼€å¯äº†è‡ªå·±çš„æ¸¸æˆåˆ†ç±»ï¼Œå…ˆåšä¸ªç®€å•çš„æ‰«é›·ç»ƒç»ƒæ‰‹â€¦â€¦<br>ç¯å¢ƒï¼švue-cliè°ƒè¯•å•ä¸ªæ¨¡å—</p><p>é‡åˆ°é—®é¢˜ï¼š</p><ul><li>vue dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†</li><li>æ¯ä¸ªæ ¼å­çš„çŠ¶æ€åŠæ ·å¼</li><li>æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®</li><li>èƒœåˆ©æ¡ä»¶</li></ul><p>ä»Šåå¯èƒ½æ·»åŠ ï¼š</p><ul><li>æ’æ——åŠŸèƒ½</li><li>è‡ªå®šä¹‰éš¾åº¦</li></ul><p><img src="https://cloud.githubusercontent.com/assets/12951147/24328934/d27b07f4-1229-11e7-85e1-a671d9a608d5.png" alt="boom"></p><a id="more"></a><h1 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h1><h2 id="core"><a href="#core" class="headerlink" title="core"></a>core</h2><p>ç”¨ä¸¤ä¸ªäºŒç»´æ•°ç»„ï¼Œåˆ†åˆ«å­˜æ”¾é›·çš„çœŸå®æƒ…å†µåŠæ ·å¼æƒ…å†µï¼Œæ ·å¼æ•°ç»„ç”¨äºç»‘å®šè‡³å„æ ¼å­<br>åˆ†åˆ«å‰¥å¼€äº†å‡ ä¸ªæ–¹æ³•ï¼š</p><ul><li>åˆå§‹åŒ–æ£‹ç›˜ï¼š<em>æ ·å¼æ£‹ç›˜åæ ‡å¤§å°åŠæ ¼å­çŠ¶æ€åˆå§‹åŒ–</em></li><li>é›·åˆå§‹åŒ–(è¡Œï¼Œåˆ—)ï¼š<br>  é€»è¾‘æ£‹ç›˜ç”±æ ·å¼æ£‹ç›˜æ‹·è´ä¸€ä»½å‰¯æœ¬<br>  æ ¹æ®é›·æ‰€å ç™¾åˆ†æ¯”è®¡ç®—æ•°é‡å¹¶åˆå§‹åŒ–é€»è¾‘æ£‹ç›˜<br>  ç”ŸæˆboomğŸ’£æ—¶ï¼Œé€»è¾‘æ£‹ç›˜[è¡Œ][åˆ—]ä½ç½®ä¸åº”è¯¥æœ‰é›·</li><li>è®¡ç®—æ²¡è¢«ç‚¹å‡»çš„æ ¼å­æ•°é‡ï¼šå•çº¯çš„éå†ä¸€éé€»è¾‘æ£‹ç›˜è€Œå·²</li><li>æŸ¥æ‰¾ç‚¸å¼¹(è¡Œï¼Œåˆ—ï¼Œæ•°ç»„ï¼Œæ–¹æ³•)ï¼ˆ<del>åå­—å•¥çš„å°±åˆ«åœ¨æ„äº†ã€‚ã€‚ã€‚</del>ï¼‰ï¼šéå†ç‚¹å‡»ä½ç½®å‘¨å›´8æ ¼æ—¶è§¦å‘æ–¹æ³•ï¼Œä¸åŒ…å«è§¦è¾¹åŠç‚¹å‡»ä½ç½®è‡ªèº«</li><li><strong>æ¸…é™¤åŠ¨ä½œ([ç¡®è®¤æ¡†],[æ–¹æ³•])</strong>ï¼š<br>  æŠ„è¢­jQueryçš„extendåˆ¤æ–­æ˜¯å¦æ·±åº¦å…‹éš†æ¥åˆ¤æ–­æ˜¯å¦å¼¹å‡ºç¡®è®¤æ¡†<br>  æ‰§è¡Œæ¸…é™¤åŠ¨ä½œå‰æ‰§è¡Œæ–¹æ³•<br>  åˆå§‹åŒ–æ£‹ç›˜</li></ul><p>ä¸»è¦æµç¨‹ï¼š</p><ul><li>é¦–æ¬¡è¿›å…¥ï¼šåˆå§‹åŒ–æ£‹ç›˜</li><li>åˆ‡æ¢æ¨¡å¼ï¼š<br>  å°†isStartä½œä¸ºæ˜¯å¦å¼¹å‡ºè¯¢é—®å‚æ•°æ‰§è¡Œæ¸…é™¤åŠ¨ä½œï¼Œå¹¶åœ¨åˆå§‹åŒ–å‰è®¾ç½®æ¨¡å¼<br>  æŠŠåæ ‡ä¹Ÿå‘Šè¯‰æ ¼å­ï¼Œåœ¨æ ¼å­çš„ç‚¹å‡»äº‹ä»¶é‡Œè¿”å›åæ ‡ï¼Œå¤–å±‚ç»Ÿä¸€å¤„ç†</li><li>æ˜¾ç¤ºæ‰€æœ‰ç‚¸å¼¹(failed)ï¼š<br>  ä¸€å±€è¿˜æ²¡å¼€å§‹éšä¾¿åˆå§‹åŒ–é›·ï¼Œä½†åˆå§‹åŒ–å‰éœ€æ‰§è¡Œä¸€éæ¸…é™¤åŠ¨ä½œï¼ŒåŒæ ·ä»¥isStartä½œä¸ºè¯¢é—®å‚æ•°<br>  å·²å¼€å§‹åˆ™ï¼Œæ£€æŸ¥failedæ˜¯å¦å› ç‚¹åˆ°ç‚¸å¼¹å¯¼è‡´ï¼Œä¸»åŠ¨æ”¾å¼ƒæ‰å¼¹å‡ºç¡®è®¤æ¡†<br>  <em>æ²¡å•¥é—®é¢˜å°±æŠŠé€»è¾‘æ£‹ç›˜æ•´ä¸ªæ›¿æ‰æ ·å¼æ£‹ç›˜</em></li><li>æ¸…é™¤æŒ‰é’®ï¼šä»…ä»…æ‰§è¡Œæ¸…é™¤åŠ¨ä½œè€Œå·²ï¼Œä»¥åŠè‹¥å·²å¼€å§‹åˆ™éœ€ç¡®è®¤*3ğŸ˜</li><li>ç‚¹å‡»äº‹ä»¶ï¼šä¼šç”±è§†å›¾è¿”å›è¡Œåˆ—ä¿¡æ¯<br>  è¿˜æ²¡å¼€å§‹ï¼šæ¸…é™¤åŠ¨ä½œé›·åˆå§‹åŒ–<br>  ç‚¹åˆ°é›·äº†ï¼ŒBoomï¼ï¼ï¼æ˜¾ç¤ºæ‰€æœ‰ç‚¸å¼¹å¹¶æ ‡ä¸Šä¸€ä¸ªfailedï¼Œæ²¡ç‚¹åˆ°å°±ç»™ç‚¹å‡»ä½ç½® [ å’Œå‘¨å›´ ] æŸ“ä¸Šé¢œè‰²ğŸ˜ï¼Œ<em>ä»¥åŠæŠŠè¿™äº›ä½ç½®ä¿¡æ¯ç”±é€»è¾‘æ£‹ç›˜èµ‹ç»™æ ·å¼æ£‹ç›˜</em><br>  è·å–è¿˜æ²¡ç‚¹å‡»çš„æ ¼å­æ•°ï¼ˆå½“ç„¶ä¸ä¼šæŠŠé›·ç®—è¿›æ¥æ‹‰ğŸ¤“ï¼‰ï¼Œè‹¥å·²ç»æ²¡æœ‰éœ€è¦ç‚¹çš„æ ¼å­äº†å°±å¼¹å‡ºWinï¼</li></ul><h2 id="æ ¼å­"><a href="#æ ¼å­" class="headerlink" title="æ ¼å­"></a>æ ¼å­</h2><p>æ ¼å­æœ¬èº«åªè´Ÿè´£æ ¹æ®ç»‘å®šå€¼çš„å˜åŒ–æ¥æ”¹å˜æ ·å¼ï¼Œå¹¶åœ¨ç‚¹å‡»äº‹ä»¶ä¸­æäº¤åæ ‡å³å¯</p><h3 id="éœ€è¦å“ªäº›æ ·å¼"><a href="#éœ€è¦å“ªäº›æ ·å¼" class="headerlink" title="éœ€è¦å“ªäº›æ ·å¼"></a>éœ€è¦å“ªäº›æ ·å¼</h3><p>ä¹Ÿå°±åˆ†ä¸‰ç§æƒ…å†µè€Œå·²ï¼Œå¦‚æœæƒ³å’Œxpæ‰«é›·ç±»ä¼¼æ ¹æ®é›·çš„æ•°é‡è°ƒæ•´å­—ä½“é¢œè‰²ï¼ŒåŠ å‡ ä¸ªstyleç„¶åæ ¹æ®é›·æ•°pushç›¸åº”æ ·å¼å…¥æ•°ç»„å°±å®Œäº‹äº†ï¼š</p><ol><li>boom!!!ğŸ’£ï¼Œç”¨-1è¡¨ç¤º</li><li>ä¸æ˜¯é›·ï¼ˆæ˜¾ç¤ºå‘¨å›´é›·çš„æ•°é‡ï¼Œæ•°æ®éœ€æ±‚èŒƒå›´<code>xâˆˆ[0,8] , xâˆˆn</code>ï¼‰</li><li>ä¸çŸ¥é“ï¼Œ-1ç»™äº†é›·0-8ç»™äº†éé›·ï¼Œé‚£ä¹ˆï¼šæ²¡ç‚¹è¿‡çš„æ ¼å­åº”è¯¥ç”¨-2å–½-ï¼Œ-<br> ç»“æœæŸèœé¸¡ç”¨çš„===â€â€æ¥åˆ¤æ–­æ˜¯å¦ç‚¹è¿‡ <del>å°±æ˜¯è¦å¢åŠ éš¾åº¦</del></li></ol><h3 id="æ ¼å­çš„æ ·å¼æ ¹æ®æ•°æ®è°ƒæ•´"><a href="#æ ¼å­çš„æ ·å¼æ ¹æ®æ•°æ®è°ƒæ•´" class="headerlink" title="æ ¼å­çš„æ ·å¼æ ¹æ®æ•°æ®è°ƒæ•´"></a>æ ¼å­çš„æ ·å¼æ ¹æ®æ•°æ®è°ƒæ•´</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¼å­æ ¹æ®ç»‘å®šæ•°æ®åˆ¤æ–­æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line"><span class="comment">//æ•°æ®ç”±ä¸»ä½“æä¾›ï¼Œä¸ºè¯¥æ ¼å­å‘¨å›´é›·çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">//é»˜è®¤æƒ…å†µè¯¥æ•°æ®==='' è¡¨ç¤ºæ²¡è¢«ç‚¹è¿‡</span></span><br><span class="line">&lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">"cls"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/å…¶ä¸­clsä¸ºè®¡ç®—å±æ€§ï¼Œæ ¹æ®ä¼ å…¥çš„é›·ä¸ªæ•°å¾—å‡º</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">    ...,</span></span><br><span class="line"><span class="regexp">    computed:&#123;</span></span><br><span class="line"><span class="regexp">        cls()&#123;</span></span><br><span class="line"><span class="regexp">            let arr = defaultClass.concat(); /</span><span class="regexp">/é»˜è®¤æ ·å¼</span></span><br><span class="line"><span class="regexp">            if(è¿™ä¸ªæ ¼å­è¢«ç‚¹äº†) &#123;</span></span><br><span class="line"><span class="regexp">                if(æœ¬èº«å°±æ˜¯é›·) &#123; arr.push(è¿™æ˜¯é¢—é›·); &#125;</span></span><br><span class="line"><span class="regexp">                else&#123; arr.push(å¹¶ä¸æ˜¯é›·å¹¶ç»™arrå¸¦ä¸Šç»¿å¸½); &#125;</span></span><br><span class="line"><span class="regexp">            &#125;</span></span><br><span class="line"><span class="regexp">            return arr;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    ...</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="extension"><a href="#extension" class="headerlink" title="extension"></a>extension</h1><p>ä¸ºä¸ä¸ºæ‰©å±•ç›®å‰çœ‹æ¥ä¹Ÿå°±æ˜¯æŠŠæœ‰å¯èƒ½æ‹å‡ºæ¥ä½œä¸ºå‚æ•°çš„éƒ¨åˆ†æ”¾åˆ°vueå¯¹è±¡å¤–è€Œå·²ï¼Œä»Šåå¯èƒ½ç”¨ä¸Šè¿™ç»„ä»¶æ—¶ä¹Ÿå°±æŠŠè¿™äº›åœ°æ–¹æ¢åˆ°vue.propsé‡Œå®Œäº‹<br>è¿˜æ˜¯ç¨å¾®ç•™äº†ç‚¹åè·¯çš„ï¼Œä¸‡ä¸€ä»Šåé—²ç€è›‹ç–¼=ï¼Œ=<br>é™¤äº†ä¸Šé¢çš„<code>ä»Šåå¯èƒ½æ·»åŠ </code>å¤–ï¼š</p><ul><li>é»˜è®¤æ¨¡å¼å’Œå„æ¨¡å¼çš„é»˜è®¤é•¿å®½ã€é›·çš„ä¸ªæ•°ç­‰</li><li>è·å–æŒ‡å®šèŒƒå›´çš„éšæœºæ•°</li><li>vueä¸“ç”¨äºŒç»´æ•°ç»„åˆå§‹åŒ–</li><li>ç¡®è®¤æ¡†</li><li>æ£€æŸ¥æ•°å­—èŒƒå›´</li></ul><hr><ul><li>æ•°æ®ç»“æ„â€”â€”é˜Ÿåˆ—</li></ul><hr><ul><li><del>èƒ½å¦åœ¨é›·åˆå§‹åŒ–æ—¶å°±æŠŠå‘¨å›´8ä¸ªæ ¼å­æ•°é‡è‡ªåŠ è€Œéæ¯æ¬¡ç‚¹å‡»å…¥é˜Ÿå‰è®¡ç®—</del><br>  é‚£å¦‚æœæ¦‚ç‡å¤§äº0.5 åˆå§‹åŒ–æ—¶å…ˆé»˜è®¤æœ‰é›·æ¥æŒ–å‡ºç©ºæ ¼å­æ€ä¹ˆåŠ</li></ul><h1 id="trouble"><a href="#trouble" class="headerlink" title="trouble"></a>trouble</h1><h2 id="vue-dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†"><a href="#vue-dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†" class="headerlink" title="vue dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†"></a>vue dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†</h2><p>å¯¹Vue2è€Œè¨€ï¼Œdataä¸‹çš„æ•°ç»„æ·±ç›‘è§†çš„å‰ææ˜¯æ•°ç»„å…ƒç´ æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ç”¨äºŒç»´æ•°ç»„å°±ä¸å¥½ä½¿äº†ï¼š<br>GGæ€å¯†è¾¾ï¼š<code>[[1,2,3,4,5],[2,2,3,4,5]]</code><br>éœ€è¦è¿™æ ·ç”¨ï¼š<code>[{0:1,1:2,...},{0:2,2:2,...}]</code><br>è¿˜å¥½å·²ç»å†™å¥½çš„è·å–éƒ¨åˆ†ä¸éœ€è¦æ”¹åŠ¨</p><h2 id="æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®"><a href="#æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®" class="headerlink" title="æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®"></a>æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®</h2><p>ä¸€ä¸ªåœ°æ–¹å‘¨å›´æ˜¯ä¸æ˜¯åº”è¯¥è¿å¸¦è¢«æ˜¾ç¤ºçš„åˆ¤æ–­ï¼Œæ— éæ˜¯ç‚¹ä¸‹ä¸€ä¸ªåœ°å„¿ä¹‹åè¿™ä¸ªä½ç½®é›·==0å°±æŠŠå‘¨å›´8ä¸ªæ ¼å­å…¥é˜Ÿç½¢äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ç‚¹ä¸‹ä¸€ä¸ªä½ç½®ï¼Œè¯¥æ ¼å­å…¥é˜Ÿ</span><br><span class="line">å‡ºé˜Ÿå¹¶è·å–é˜Ÿé¦–çš„æ ¼å­</span><br><span class="line"><span class="keyword">while</span>(è¯¥æ ¼å­ä¸ä¸ºç©º)&#123;</span><br><span class="line">    è®¡ç®—è¿™ä¸ªæ ¼å­å‘¨å›´å¤šå°‘é›·</span><br><span class="line">    åœ¨é€»è¾‘æ£‹ç›˜ä¸­æ ‡è®°è¯¥æ ¼å­æ•°é‡</span><br><span class="line">    åŒæ ·æŠŠè¿™ä¸ªæ ¼å­ä¸­é›·çš„æ•°é‡æ ‡è®°ç»™æ ·å¼æ£‹ç›˜ï¼Œå‰©ä¸‹çš„å°±äº¤ç»™æ ¼å­ç»„ä»¶å»åšäº†</span><br><span class="line">    <span class="keyword">if</span>(å‘¨å›´æ²¡é›·)</span><br><span class="line">        <span class="keyword">for</span>(ç‚¹å‡»ä½ç½®å‘¨å›´çš„<span class="number">8</span>ä¸ªæ ¼å­)&#123;</span><br><span class="line">            <span class="keyword">if</span>(å·²ç‚¹å‡»è¿‡æˆ–å·²åœ¨é˜Ÿåˆ—ä¸­)&#123; <span class="keyword">continue</span>; &#125;</span><br><span class="line">            å¾ªç¯åˆ°çš„è¿™ä¸ªæ ¼å­å…¥é˜Ÿ</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èƒœåˆ©æ¡ä»¶ä¸è„‘ç»†èƒï¼ˆæˆ–è€…åº”è¯¥æ˜¯troublingï¼‰"><a href="#èƒœåˆ©æ¡ä»¶ä¸è„‘ç»†èƒï¼ˆæˆ–è€…åº”è¯¥æ˜¯troublingï¼‰" class="headerlink" title="èƒœåˆ©æ¡ä»¶ä¸è„‘ç»†èƒï¼ˆæˆ–è€…åº”è¯¥æ˜¯troublingï¼‰"></a>èƒœåˆ©æ¡ä»¶ä¸è„‘ç»†èƒï¼ˆæˆ–è€…åº”è¯¥æ˜¯troublingï¼‰</h2><p>æœ¬æ¥è®¡åˆ’åœ¨æ¯æ¬¡å…¥é˜Ÿæ—¶å·²ç‚¹å‡»æ ¼å­è®°å½•è‡ªåŠ ï¼Œç„¶è€Œå› ä¸ºåˆ¤æ–­æ–¹æ³•çš„æ¼æ´å¯¼è‡´ä¼¼ä¹æœ‰å¤šæ¬¡é‡å¤å…¥é˜Ÿï¼ˆ(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»ä¸æ˜¯è®©ä»–åˆ¤æ–­åœ¨é˜Ÿåˆ—å°±è·³è¿‡äº†ä¹ˆï¼‰ï¼Œä¾ç„¶æ²¡æƒ³æ¸…æ¥šä¸ºä½•<br>ç›®å‰çš„åšæ³•æ˜¯æ¯æ¬¡ç‚¹å‡»é˜Ÿåˆ—å¾ªç¯å®Œäº‹ä¹‹åéå†é€»è¾‘æ£‹ç›˜ç»Ÿè®¡æ²¡ç‚¹è¿‡çš„ä½ç½®æ•°é‡ï¼Œç®€å•ç²—æš´</p><p>ä¸ºå›¾çœäº‹é˜Ÿåˆ—ç”¨çš„æ•°ç»„ï¼Œå‡ºé˜Ÿåˆ™æ˜¯<code>arr=arr.slice(1)</code><br>ä»”ç»†æƒ³äº†æƒ³ï¼Œé˜Ÿåˆ—ä¿å­˜å’Œå‡ºé˜Ÿæ–¹å¼æ”¹æ”¹çš„å¯èƒ½æ€§ï¼š<br>ä¿ç•™ä¸€ä¸ªæ¸¸æ ‡ä¿å­˜å½“å‰æŒ‡å‘çš„å…ƒç´ ä¸‹æ ‡ï¼Œå‡ºé˜Ÿæ—¶è¿”å›è¯¥ä¸‹æ ‡å…ƒç´ ç„¶åä¸‹æ ‡++è€Œä¸æ”¹å˜åŸæœ‰æ•°ç»„<br>while(æ ¼å­ä¸ä¸ºç©º)ä¸­ä½¿ç”¨findå°±ä¸ä¼šæ¼æ‰å…ƒç´ äº†ï¼Œè¯´ä¸å®šè¿˜èƒ½é¡ºä¾¿ä¿å­˜ç‚¹å‡»è®°å½•<br><del>ä¸è¿‡å²‚ä¸æ˜¯å¾’å¢é˜Ÿåˆ—é•¿åº¦ï¼Ÿå¾—ä¸å¿å¤±ï¼Ÿè¿˜æ˜¯ç®€å•ç²—æš´å¥½äº†</del></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ‰«é›·&quot;&gt;&lt;a href=&quot;#æ‰«é›·&quot; class=&quot;headerlink&quot; title=&quot;æ‰«é›·&quot;&gt;&lt;/a&gt;æ‰«é›·&lt;/h1&gt;&lt;p&gt;çªå‘å¥‡æƒ³å°±å¼€å¯äº†è‡ªå·±çš„æ¸¸æˆåˆ†ç±»ï¼Œå…ˆåšä¸ªç®€å•çš„æ‰«é›·ç»ƒç»ƒæ‰‹â€¦â€¦&lt;br&gt;ç¯å¢ƒï¼švue-cliè°ƒè¯•å•ä¸ªæ¨¡å—&lt;/p&gt;
&lt;p&gt;é‡åˆ°é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;vue dataå±æ€§æ•°ç»„çš„æ·±åº¦ç›‘è§†&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ ¼å­çš„çŠ¶æ€åŠæ ·å¼&lt;/li&gt;
&lt;li&gt;æŒ‰é˜Ÿåˆ—éå†åº”è¯¥â€œç‚¹å‡»â€çš„ä½ç½®&lt;/li&gt;
&lt;li&gt;èƒœåˆ©æ¡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»Šåå¯èƒ½æ·»åŠ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ’æ——åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;è‡ªå®šä¹‰éš¾åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://cloud.githubusercontent.com/assets/12951147/24328934/d27b07f4-1229-11e7-85e1-a671d9a608d5.png&quot; alt=&quot;boom&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="games" scheme="https://chreem.github.io/categories/games/"/>
    
    
      <category term="vue" scheme="https://chreem.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>npmå‘å¸ƒæµç¨‹</title>
    <link href="https://chreem.github.io/2017/03/17/20170317-mock-server/"/>
    <id>https://chreem.github.io/2017/03/17/20170317-mock-server/</id>
    <published>2017-03-17T23:53:18.000Z</published>
    <updated>2020-06-11T08:48:53.027Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Publish-Mock-Server-to-NPM"><a href="#Publish-Mock-Server-to-NPM" class="headerlink" title="Publish Mock-Server to NPM"></a>Publish Mock-Server to NPM</h1><p>å›¾çœäº‹ç”¨çš„expressï¼Œæ•°æ®å°±ç”¨*.jsonä¿å­˜ï¼Œå‡è£…è‡ªå·±æœ‰ä¸ªmongodbã€‚<br>åŒæ—¶æµ‹è¯•npmå‘å¸ƒï¼š<br><a href="https://www.npmjs.com/package/chr-mock" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/v/chr-mock.svg?style=flat-square" alt="chr-mock"></a> <a href="https://travis-ci.org/Chreem/chr-mock" target="_blank" rel="noopener"><img src="https://img.shields.io/travis/Chreem/chr-mock.svg?style=flat-square" alt="Travis"></a> <a href="https://www.npmjs.com/package/chr-mock" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/l/chr-mock.svg?style=flat-square" alt="npm"></a></p><a id="more"></a><h1 id="å‰ç½®éœ€æ±‚"><a href="#å‰ç½®éœ€æ±‚" class="headerlink" title="å‰ç½®éœ€æ±‚"></a>å‰ç½®éœ€æ±‚</h1><ol><li>ä¿®æ”¹<code>package.json</code></li><li><code>commander</code>å‘½ä»¤è¡Œè¾…åŠ©å·¥å…·</li><li><code>express</code>æä¾›mockæœåŠ¡</li></ol><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>è‡ªå®šä¹‰å‘½ä»¤éœ€è¦åœ¨package.jsoné‡Œä¿®æ”¹binå±æ€§ï¼Œå¢åŠ å‘½ä»¤æ‰§è¡Œå…¥å£<br>å¢åŠ <code>preferGlobal</code>æç¤ºå…¨å±€å®‰è£…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"preferGlobal"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">"bin"</span>: &#123;</span><br><span class="line">    <span class="string">"chr"</span>: <span class="string">"./index.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æˆ–è€…è£…å¥½åæ·»åŠ è‡³å…¨å±€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> chr-mock</span><br><span class="line">~/chr-mock$ npm link</span><br></pre></td></tr></table></figure><h2 id="commander"><a href="#commander" class="headerlink" title="commander"></a><a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener">commander</a></h2><p>nodeå‘½ä»¤è¡Œç”¨<br>èƒ½å¾ˆæ–¹ä¾¿çš„é…ç½®å„ç±»å‚æ•°ä»¥åŠè‡ªåŠ¨ç”Ÿæˆå¸®åŠ©æ–‡æ¡£â€“help  </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="comment">// è§çš„æ¯”è¾ƒå¤šçš„åº”è¯¥æ˜¯#!/bin/bashï¼Œæ­¤å¤„åŒç†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>);</span><br><span class="line"><span class="keyword">var</span> filename;</span><br><span class="line"></span><br><span class="line">program</span><br><span class="line">    .command(<span class="string">'watch [file]'</span>)</span><br><span class="line">    .description(<span class="string">'Add a file to watch'</span>)</span><br><span class="line">    .action(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        filename = file;</span><br><span class="line">    &#125;);</span><br><span class="line">program         <span class="comment">// ä¹‹æ‰€ä»¥å•åˆ—ä¸€æ¡è€Œæ²¡å’Œä¸Šé¢æ”¾ä¸€èµ·æ˜¯ä¸ºäº†èƒ½æ­£å¸¸æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£</span></span><br><span class="line">    .option(<span class="string">'-p, --port &lt;n&gt;'</span>, <span class="string">'Add port to listen, default is 8080'</span>, /^[<span class="number">1</span><span class="number">-9</span>]\d*$/, <span class="number">8080</span>);</span><br><span class="line">program.parse(process.argv);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> filename === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    program.outputHelp();</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å‚æ•°ä¸å¯¹æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£</span></span><br><span class="line"><span class="comment">E:\Web\node\chr-mock&gt;node index.js watch</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Usage: index [options] [command]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Commands:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    watch [file]  Add a file to watch</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Options:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    -h, --help      output usage information</span></span><br><span class="line"><span class="comment">    -p, --port &lt;n&gt;  Add port to listen, default is 8080</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file:'</span> + filename);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'port:'</span> + program.port);</span><br></pre></td></tr></table></figure><h2 id="express"><a href="#express" class="headerlink" title="express"></a><a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener">express</a></h2><p>åé¢è¦åšçš„åŸºæœ¬ä¸Šå°±åœ¨è¿™é‡Œçš„watch.jsé‡Œå†™äº†<br>æ ¹æ®ä¸Šé¢å‘½ä»¤è¡Œæ‹¿åˆ°çš„æ–‡ä»¶åŠç›‘å¬ç«¯å£è¿è¡Œexpress  </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line"><span class="keyword">const</span> watch = <span class="built_in">require</span>(<span class="string">'./watch.js'</span>);</span><br><span class="line">... <span class="comment">//ä¸Šä¸€æ­¥</span></span><br><span class="line">watch.run(filename, program.port);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* watch.js */</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line">    , app = express();</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    run(file, port)&#123;</span><br><span class="line">        app.get(<span class="string">'/'</span>, (req, res)=&gt;&#123;</span><br><span class="line">            res.send(<span class="string">'hello~'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        app.listen(port);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä»¥åŠå„ç§ä¸­é—´ä»¶ï¼š  </p><ol><li>è·¨åŸŸï¼šcors</li><li>è§£æpost bodyï¼šbody-parser</li></ol><p>å…¶ä»–ï¼š</p><ol><li>url</li><li>path</li><li>jsonfile</li></ol><h1 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h1><h2 id="è·¯ç”±åŒ¹é…"><a href="#è·¯ç”±åŒ¹é…" class="headerlink" title="è·¯ç”±åŒ¹é…"></a>è·¯ç”±åŒ¹é…</h2><p>é¦–å…ˆè¦åšçš„å°±æ˜¯æ ¹æ®è·¯ç”±æ¥åŒ¹é…è®¿é—®å­—æ®µï¼Œæ²¡å•¥ç–‘é—®åº”è¯¥<br>è¯¥èŠ‚å‚è€ƒ<a href="http://www.expressjs.com.cn/guide/routing.html" target="_blank" rel="noopener">api è·¯ç”±</a><br>æ•°æ®æ·±åº¦ä¸å®šï¼Œæ— æ³•ä½¿ç”¨<code>express.Router</code>ï¼Œéœ€é€šè¿‡<code>url.parse(*).pathname</code>è‡ªè¡Œè§£æ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">run(file, port)&#123;</span><br><span class="line">    app.all(<span class="string">'*'</span>,(req, res)=&gt;&#123;</span><br><span class="line">        <span class="keyword">let</span> params = url.parse(req.originalUrl).pathname</span><br><span class="line">            .replace(<span class="regexp">/^\//</span>,<span class="string">''</span>)</span><br><span class="line">            .replace(<span class="regexp">/\/$/</span>,<span class="string">''</span>)</span><br><span class="line">            .split(<span class="string">'/'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‚æ•°åŠ å·¥å¤„ç†   åŠå„ç§åˆ¤æ–­</span></span><br><span class="line">        <span class="comment">// è¯·æ±‚åˆ†ç±»     ä»¥åŠå„ç§åˆ¤æ–­</span></span><br><span class="line">        <span class="comment">// è¿”å›å€¼</span></span><br><span class="line">    &#125;)</span><br><span class="line">    app.listen(port);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‘å¸ƒè‡³npm"><a href="#å‘å¸ƒè‡³npm" class="headerlink" title="å‘å¸ƒè‡³npm"></a>å‘å¸ƒè‡³npm</h1><h2 id="æ‰‹åŠ¨"><a href="#æ‰‹åŠ¨" class="headerlink" title="æ‰‹åŠ¨"></a>æ‰‹åŠ¨</h2><p>åªéœ€è¦ç®€å•å‡ æ­¥å°±èƒ½å®Œæˆâ€¦â€¦ï¼š  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. è·³è¿‡ç¬¬äºŒæ­¥</span></span><br><span class="line"><span class="comment"># 2. æ³¨å†Œ</span></span><br><span class="line">$ <span class="built_in">cd</span> chr-mock             <span class="comment"># è‡³é¡¹ç›®ç›®å½•</span></span><br><span class="line">~/chr-mock$ npm login     <span class="comment"># ç™»å½•</span></span><br><span class="line">~/chr-mock$ npm publish   <span class="comment"># å‘å¸ƒ</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±èƒ½ä»å…¬æœ‰ä»“åº“ä¸‹è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g chr-mock</span><br><span class="line">chr watch data.json</span><br></pre></td></tr></table></figure><h2 id="é…åˆtravis-ciè‡ªåŠ¨å‘å¸ƒ"><a href="#é…åˆtravis-ciè‡ªåŠ¨å‘å¸ƒ" class="headerlink" title="é…åˆtravis ciè‡ªåŠ¨å‘å¸ƒ"></a>é…åˆtravis ciè‡ªåŠ¨å‘å¸ƒ</h2><ol><li><p>github &amp; travis cié…ç½®</p></li><li><p>æŸ¥çœ‹å®Œæ•´çš„login token, é€šå¸¸åœ¨<code>~/.npmrc</code>é‡Œ</p></li><li><p>Travis CIé…ç½®ç¯å¢ƒå˜é‡å­˜å…¥token</p></li><li><p>.travis.ymlæ·»åŠ deployä¿¡æ¯ï¼š</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">provider:</span> <span class="string">npm</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">$npm_login_email</span></span><br><span class="line">    <span class="attr">api_key:</span> <span class="string">$npm_token_key</span></span><br><span class="line">    <span class="attr">on:</span></span><br><span class="line">        <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li><li><p>git push</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Publish-Mock-Server-to-NPM&quot;&gt;&lt;a href=&quot;#Publish-Mock-Server-to-NPM&quot; class=&quot;headerlink&quot; title=&quot;Publish Mock-Server to NPM&quot;&gt;&lt;/a&gt;Publish Mock-Server to NPM&lt;/h1&gt;&lt;p&gt;å›¾çœäº‹ç”¨çš„expressï¼Œæ•°æ®å°±ç”¨*.jsonä¿å­˜ï¼Œå‡è£…è‡ªå·±æœ‰ä¸ªmongodbã€‚&lt;br&gt;åŒæ—¶æµ‹è¯•npmå‘å¸ƒï¼š&lt;br&gt;&lt;a href=&quot;https://www.npmjs.com/package/chr-mock&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/v/chr-mock.svg?style=flat-square&quot; alt=&quot;chr-mock&quot;&gt;&lt;/a&gt; &lt;a href=&quot;https://travis-ci.org/Chreem/chr-mock&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img src=&quot;https://img.shields.io/travis/Chreem/chr-mock.svg?style=flat-square&quot; alt=&quot;Travis&quot;&gt;&lt;/a&gt; &lt;a href=&quot;https://www.npmjs.com/package/chr-mock&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img src=&quot;https://img.shields.io/npm/l/chr-mock.svg?style=flat-square&quot; alt=&quot;npm&quot;&gt;&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="practice" scheme="https://chreem.github.io/categories/practice/"/>
    
    
      <category term="npm" scheme="https://chreem.github.io/tags/npm/"/>
    
  </entry>
  
</feed>
